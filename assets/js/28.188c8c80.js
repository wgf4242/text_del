(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{641:function(t,s,a){"use strict";a.r(s);var e=a(4),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"awd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#awd"}},[t._v("#")]),t._v(" AWD")]),t._v(" "),a("h1",{attrs:{id:"加固-信息搜集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加固-信息搜集"}},[t._v("#")]),t._v(" 加固-信息搜集")]),t._v(" "),a("p",[t._v("ipscan 扫描C段 -- win\nNetdiscover -- kali\nnetdiscover -r 192.168.100.0/24\n不能2层扫描。")]),t._v(" "),a("p",[t._v("如果有B段，nmap存活探测 , zenmap -- 图形化界面\nnestat\nnestat -pantu # kali\n-tnl\n-lntup\nps -ef | grep apache # 找服务地址")]),t._v(" "),a("p",[t._v("WebserverScanner")]),t._v(" "),a("h2",{attrs:{id:"收集操作记录，可能有历史mysql密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#收集操作记录，可能有历史mysql密码"}},[t._v("#")]),t._v(" 收集操作记录，可能有历史mysql密码")]),t._v(" "),a("p",[t._v("history")]),t._v(" "),a("p",[t._v("history | grep mysql\n查看其他用户的 history\nls -al | grep history\nmore .mysql_history\nC+F C+B")]),t._v(" "),a("p",[t._v("/var/log")]),t._v(" "),a("p",[t._v("whereis mysql # 找到位置\n查看配置文件")]),t._v(" "),a("p",[t._v("重启网卡 /etc/init.d/network-manager\nsystemctl restart NetworkManager")]),t._v(" "),a("h2",{attrs:{id:"漏洞检测-27关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#漏洞检测-27关"}},[t._v("#")]),t._v(" 漏洞检测 27关")]),t._v(" "),a("p",[t._v("upload-labs 通关攻略\n上传漏洞12345789\nSvn git 源码泄露\nStrus, jboss  -- K8飞刀\nCMS, 参考 exp-lists\n反序列化，badbash,heartbleed")]),t._v(" "),a("p",[t._v("Apache: conf/httpd.conf, /etc/httpd/conf/httpd.conf\nRedhat 系列 httpd -- whereis httpd\nUbuntu 服务是 Apache")]),t._v(" "),a("p",[t._v("Tomcat: conf/server.xlm, tomcat-users.xml\nMysql: /etc/my.cnf\n站点配置文件 conn.php inc.php config.php\n利用 .htaccess 进行加固\nphp.ini\n搜索 disable, 在 disable function = phpinfo,eval,passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restore,dl,pfsockopen,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,fsocket,fsockopen")]),t._v(" "),a("p",[t._v("lampp重启\n重启: /opt/lampp/lampp restart\nlampp/htdocs")]),t._v(" "),a("h2",{attrs:{id:"apache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apache"}},[t._v("#")]),t._v(" Apache")]),t._v(" "),a("p",[t._v("httpd/conf\n搜索 user")]),t._v(" "),a("p",[t._v("ServerSignature Off # 关闭服务器生成页面的页脚中版本信息\nServerTokens Prod # Prod 隐藏信息")]),t._v(" "),a("p",[t._v("conf 配置文件\n修改 DocumentRoot 路径\n禁止目录遍历\nOptions -Indexes FollowSymLinks\n设置只监听\n1.1.1.1 地址的 80 端口 Listen 1.1.1.1:80\n禁用SSI\n自定义错误信息\n关键文件权限\n使用命令“chmod 600\n/etc/httpd/conf/httpd.conf”\n⚫ 设置配置文件为属 主可读写，其他用户无权限")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('修改 Apache 配置文件 httpd.conf，添加以下行，以 php 为例：\n  ⚫ <Directory "/var/www/html/upload">\n  ⚫ <FilesMatch "\\.php$">\n  ⚫ Order allow,deny\n  ⚫ Deny from all\n  ⚫ </FilesMatch>\n  ⚫ </Directory>\n')])])]),a("p",[t._v("增加验证 用户名密码\nhtpasswd .htpasswd user1")]),t._v(" "),a("p",[t._v("进入网址后，F12开发者工具-网络--查看请求。")]),t._v(" "),a("h2",{attrs:{id:"常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[t._v("#")]),t._v(" 常用命令")]),t._v(" "),a("p",[t._v("文件打包  tar -cvf web.tar .\n192.168.x.x/web.tar\nCtrl+Shift+T 新建终端")]),t._v(" "),a("p",[t._v("seay 源代码审计, 导入后，点击 自动审计\nWebshellKill - 查杀工具，自定义扫描 选择审查的地方。")]),t._v(" "),a("h2",{attrs:{id:"ifconfig-linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ifconfig-linux"}},[t._v("#")]),t._v(" ifconfig -- Linux")]),t._v(" "),a("p",[t._v("配置ip ifconfig eth0 192.168.100.211 netmask 255.255.255.0\n路由 route add default gw 192.168.5.1")]),t._v(" "),a("h2",{attrs:{id:"route-windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#route-windows"}},[t._v("#")]),t._v(" route --Windows")]),t._v(" "),a("p",[t._v("route add 192.168.100.0/24 192.168.100.1")]),t._v(" "),a("h1",{attrs:{id:"重置路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重置路由"}},[t._v("#")]),t._v(" 重置路由")]),t._v(" "),a("p",[t._v("netsh int ipv4 reset")]),t._v(" "),a("p",[t._v("route print --- 路由会优先使用最后一条。")]),t._v(" "),a("h2",{attrs:{id:"搜索文件中的字符串"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搜索文件中的字符串"}},[t._v("#")]),t._v(" 搜索文件中的字符串")]),t._v(" "),a("p",[t._v('grep -nr "strings"')]),t._v(" "),a("h1",{attrs:{id:"mysql-加固"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-加固"}},[t._v("#")]),t._v(" Mysql 加固")]),t._v(" "),a("p",[t._v("mysqld")]),t._v(" "),a("h2",{attrs:{id:"设置密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置密码"}},[t._v("#")]),t._v(" 设置密码")]),t._v(" "),a("blockquote",[a("p",[t._v("select user, password, host from mysql.user();\nupdate mysql.user set password=password('123456') where user='root'\n或\nset password=password('123456');\nset password for demo@'localhost' = password('123456');\nmysqladmin *********\n或\nmysqladmin -u用户名 -p旧密码 password 新密码\n或\nmysqld --skip-grant-tables 回车\nmysqladmin -u root password secret")])]),t._v(" "),a("h2",{attrs:{id:"faq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),a("p",[t._v("Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2 \"No such file or directory\")\nmysqladmin -u root password secret -h 127.0.0.1\nmysql -uroot -psecret")]),t._v(" "),a("p",[t._v("% 表示远程")]),t._v(" "),a("p",[t._v("查看状态 mysqld status")]),t._v(" "),a("h3",{attrs:{id:"新用户授权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新用户授权"}},[t._v("#")]),t._v(" 新用户授权")]),t._v(" "),a("p",[t._v("grant 权限 on "),a("em",[t._v(".")]),t._v("\ngrant all on test.*\ngrant all on "),a("em",[t._v(".")]),t._v(" to demo@'%'\nrevoke all on "),a("em",[t._v(".")]),t._v("  from demo@'%'\ngrant all on finecms.* to demo@'%' identify by 'demo'\nflush privileges")]),t._v(" "),a("h3",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),a("p",[t._v("限制远程登录\nbind-address=127.0.0.1")]),t._v(" "),a("p",[t._v("禁止读取主机上的文件\n修改my.cnf\n添加 set.variable=local-infile=0")])])}),[],!1,null,null,null);s.default=r.exports}}]);